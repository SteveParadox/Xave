{% extends "_ext/adminLayout.html"%}
{% block content %}

<div class="recent-grid" >
    <div class="projects">
        <div class="card" style="margin-top: 2rem">
<div class="card-header">
    
    <h3>
        Register Student
    </h3>

    <a href="{{ url_for('admin.registerStudent') }}">
        <button>
    Go
        <span class="las la-arrow-right">

        </span>
        </button>
        </a>
    
</div>
</div>
<br>
<div class="search-wrapper">
    <span class="las la-search">

    </span>
    <input type="search" id="livebox" class="livebox" placeholder="Search Student">
    
</div>
<div class="card-body">
    <table width="100%">
    <thead>
        <tr>
            <td>
                Student Name
            </td>
            <td>
                Email Address
            </td>
            <td>
               Matriculation Number
            </td>
        </tr>
    
    </thead>
    <tbody>
<br>
        <tr id="datalist" >
        
        </tr>
    </tbody>


    </table>

</div>
</div>


</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("#livebox").on("input", function (e) {
            $("#datalist").empty();

            $.ajax({
                method: "post",
                url: "/search",
                data: { text: $("#livebox").val() },
                success: function (res) {
                    console.log(res)
                    var data = "<table>";
                    $.each(res, function (searchfile, value) {
                        data += '<td> '+ value.name + '</td>' + "<td>" + value.email + "</td>" + "<td>" + value.matriculation_number + "</td>" + "<td class='card-header' style='border-bottom:none'>" + '<a href="/admin/student/data/'+ value.unique_id +'">' + "<button>" +  "detail" + "</button>" + "</a>"  + "</td>";
                    });
                    data += "</table>";
                    $("#datalist").html(data); 0
                }
            });
        });
    });
</script>
{% endblock content %}

